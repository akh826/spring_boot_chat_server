# Spring Boot Chat Server

A Simple Springboot chat server, most code and text and animation generated by github copilot in vscode

## ğŸš€ Live Demo

**Try it live:** [https://chat.akh826.com/](https://chat.akh826.com/)

---

## Deploy to AWS Lightsail

### 1. æº–å‚™ç’°å¢ƒ

- å®‰è£ JDK

  ```sh
  sudo apt update
  sudo apt install openjdk-17-jdk   # æ ¹æ“šé …ç›®éœ€æ±‚é¸æ“‡ç‰ˆæœ¬ï¼ˆå¦‚ 11/17ï¼‰
  java -version                     # é©—è­‰å®‰è£
  ```

- å®‰è£ MySQLï¼ˆå¯é¸ï¼Œå¦‚éœ€è³‡æ–™åº«ï¼‰

  ```sh
  sudo apt install mysql-server
  sudo mysql_secure_installation    # å®‰å…¨é…ç½®
  ```

- å®‰è£ Nginxï¼ˆåå‘ä»£ç†ï¼‰

  ```sh
  sudo apt install nginx
  sudo systemctl start nginx
  ```

---

### 2. æ‰“åŒ… Spring Boot æ‡‰ç”¨

åœ¨æœ¬åœ°é–‹ç™¼ç’°å¢ƒç”Ÿæˆå¯åŸ·è¡Œ JARï¼š

- Maven é …ç›®

  ```sh
  mvnw clean package
  ```

- Gradle é …ç›®

  ```sh
  gradle bootJar
  ```

ç”Ÿæˆçš„ JAR é€šå¸¸åœ¨ `target/` æˆ– `build/libs/` ç›®éŒ„ä¸‹ã€‚

---

### 3. ä¸Šå‚³æ–‡ä»¶åˆ°ä¼ºæœå™¨

ä½¿ç”¨ SCP æˆ– SFTP å·¥å…·ä¸Šå‚³ JAR æ–‡ä»¶ï¼š

```sh
scp -i "pem-key" "path-to-your-app.jar" user@your-server-ip:"destination-path"
```

---

### 4. ä¼ºæœå™¨ç«¯é…ç½®

- å‰µå»ºæœå‹™ç”¨æˆ¶ï¼ˆå¯é¸ï¼‰

  ```sh
  sudo adduser springbootuser
  sudo usermod -aG sudo springbootuser   # æˆäºˆ sudo æ¬Šé™ï¼ˆæŒ‰éœ€ï¼‰
  ```

- å‰µå»º Systemd æœå‹™ï¼ˆç®¡ç†æ‡‰ç”¨é€²ç¨‹ï¼‰

  å‰µå»ºæœå‹™æ–‡ä»¶ï¼š

  ```sh
  sudo nano /etc/systemd/system/springboot.service
  ```

  å†…å®¹ç¤ºä¾‹ï¼š

  ```
  [Unit]
  Description=Spring Boot App
  After=syslog.target

  [Service]
  User=springbootuser
  ExecStart=/usr/bin/java -jar /home/springbootuser/app/your-app.jar
  SuccessExitStatus=143
  Restart=always

  [Install]
  WantedBy=multi-user.target
  ```

- å¯åŠ¨æœåŠ¡ï¼š

  ```sh
  sudo systemctl daemon-reload
  sudo systemctl start springboot
  sudo systemctl enable springboot   # é–‹æ©Ÿè‡ªå•Ÿ
  ```

---

### 5. é…ç½® Nginx åå‘ä»£ç†

ç·¨è¼¯ Nginx é…ç½®ï¼š

```sh
sudo nano /etc/nginx/sites-available/your-domain
```

å†…å®¹ç¤ºä¾‹ï¼š

```
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8080;  # Spring Booté è¨­ç«¯å£
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

å•Ÿç”¨é…ç½®ä¸¦æ¸¬è©¦ï¼š

```sh
sudo ln -s /etc/nginx/sites-available/your-domain /etc/nginx/sites-enabled/
sudo nginx -t        # æ¸¬è©¦èªæ³•
sudo systemctl restart nginx
```

---

### 6. é…ç½®é˜²ç«ç‰†

å…è¨± HTTP/HTTPS å’Œ SSHï¼š

```sh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 22/tcp
sudo ufw enable
```

---

### 7. é©—è­‰éƒ¨ç½²

- è¨ªå• `http://your-server-ip` æŸ¥çœ‹æ‡‰ç”¨ã€‚
- æª¢æŸ¥æ—¥èªŒï¼š

  ```sh
  journalctl -u springboot -f   # å¯¦æ™‚æ—¥èªŒ
  ```

---

### å¸¸è¦‹å•é¡Œ

- **ç«¯å£è¡çª**ï¼šç¢ºä¿ Spring Boot çš„ `server.port` èˆ‡ Nginx é…ç½®ä¸€è‡´ã€‚
- **è³‡æ–™åº«é€£æ¥**ï¼šæª¢æŸ¥ `application.properties` ä¸­çš„è³‡æ–™åº« URLã€ç”¨æˆ¶åå’Œå¯†ç¢¼ã€‚
- **æ¬Šé™å•é¡Œ**ï¼šç¢ºä¿ JAR æ–‡ä»¶å’Œç›®éŒ„æœ‰æ­£ç¢ºæ¬Šé™ï¼ˆ`chmod +x`ï¼‰ã€‚
- **HTTPS**ï¼šå¦‚éœ€ HTTPSï¼Œå¯ä½¿ç”¨ Let's Encrypt è­‰æ›¸ï¼ˆé€šé Certbot å·¥å…·ï¼‰ã€‚

---
